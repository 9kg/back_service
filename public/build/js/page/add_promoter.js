$(function(){function e(e){var r=$("form.add_promoter");if(!base.formValidate(r))return!1;var a=r.serializeArray();return $.ajax({url:"http://es2.laizhuan.com/back/promoter/insert",type:"POST",dataType:"json",data:a}).done(function(e){1===e.status?(t.operTip(e.msg||"操作成功！",{theme:"success",css:{dir:"left","white-space":"nowrap"}}),window.renderTable&&window.renderTable()):6===e.status?($('[name="username"]').addClass("invalid").parent().prev().operTip(e.msg||"当前用户名已存在！",{theme:"danger",css:{dir:"right","white-space":"nowrap"}}),window.oper_promoter.box.show()):t.operTip(e.msg||"操作失败！",{theme:"danger",css:{dir:"left","white-space":"nowrap"}})}).fail(function(e){t.operTip(a.msg||"操作失败！",{theme:"danger",css:{dir:"left","white-space":"nowrap"}})}),!0}function r(){var r=new Box({title:"添加推广人员",html:"http://es2.laizhuan.com/back/page/promoter_add .add_promoter_form",css:{"min-width":"320px","max-width":"420px"},fnSure:function(r,t){return e(r&&r.afterfnSure)?void 0:!1},fnCancel:function(e){}});window.oper_promoter={box:r}}var t=$(".btn_promoter_add").parent();$('[name="name"]').length?$('form.add_promoter [name="name"]').attr("data-validate-dir",""):r(),$("body").on("click",".btn_promoter_submit",function(){e(function(e){})})});