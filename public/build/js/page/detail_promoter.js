$(function(){var e,t=$(".btn_edit").parent(),a=new Box({title:"修改推广人员",css:{"min-width":"320px","max-width":"420px"},fnSure:function(a,o){if(!base.formValidate(e))return!1;$.trim($('[name="password"]').val())||$('[name="password"]').prop("disabled",!0);var n=e.serializeArray();$('[name="password"]').prop("disabled",!1),$.ajax({url:"http://es2.laizhuan.com/back/promoter/modify",type:"POST",dataType:"json",data:n}).done(function(e){1==e.status?(t.operTip(e.msg||"操作成功！",{theme:"success",css:{left:"auto",right:"20px","white-space":"nowrap"}}),window.opener&&window.opener.renderTable&&window.opener.renderTable(),setTimeout(function(){window.location.href=window.location.href},500)):t.operTip(e.msg||"操作失败！",{theme:"danger",css:{left:"auto",right:"20px","white-space":"nowrap"}})}).fail(function(e){t.operTip(n.msg||"操作失败！",{theme:"danger",css:{left:"auto",right:"20px","white-space":"nowrap"}})})},fnCancel:function(e){}});a.initContent("http://es2.laizhuan.com/back/page/promoter_add .add_promoter_form",function(){$('[name="name"]').val(promoter_data.name).before($('<input type="hidden" name="id" value="'+promoter_data.id+'">')),$('[name="phone"]').val(promoter_data.phone),$('[name="username"]').val(promoter_data.username).prop("disabled",!0),$('[name="password"]').attr("placeholder","如不修改请留空").removeAttr("data-validate"),e=$("form.add_promoter")});var o=new Tip({$ct:$(".details").eq(0),confirm:!0,content:"您确定要删除当前推广人员？",isShow:!1,theme:"warning",dir:"bottom",css:{width:"9em"},alertfn:function(e){e&&$.ajax({url:"http://es2.laizhuan.com/back/promoter/remove",type:"POST",dataType:"json",data:{id:promoter_data.id}}).done(function(e){1===e.status?(t.operTip(e.msg||"操作成功！",{theme:"success",css:{left:"auto",right:"20px","white-space":"nowrap"}}),window.opener&&window.opener.renderTable&&window.opener.renderTable(),setTimeout(function(){window.close()},500)):t.operTip(e.msg||"操作失败！",{theme:"danger",css:{left:"auto",right:"20px","white-space":"nowrap"}})}).fail(function(e){t.operTip(data.msg||"操作失败！",{theme:"danger",css:{left:"auto",right:"20px","white-space":"nowrap"}})})}});$("body").on("click",".btn_edit",function(){a.show()}).on("click",".btn_remove",function(){o.init(),o.show()})});