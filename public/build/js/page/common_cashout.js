$(function(){var t=new Box({title:"拒绝提现",css:{width:"400px"},fnSure:function(t,e){var i=$(".disagree_form");if(!base.formValidate(i))return!1;var a={objectId:$('[name="objectId"]',i).val(),errmsg:$('[name="errmsg"]').val()};$.ajax({url:"http://es2.laizhuan.com/back/finance/cashout_disagree",type:"POST",dataType:"json",data:a}).done(function(t){1==t.status?($(".btn_disagree").parent().operTip(t&&t.msg||"操作成功！",{theme:"success",css:{"white-space":"nowrap",dir:"left"}}),n.data=null,n.render()):$(".btn_disagree").parent().operTip(t&&t.msg||"操作失败！",{theme:"danger",css:{"white-space":"nowrap",dir:"left"}})}).fail(function(t){console.dir(t)})},fnCancel:function(t){}}),e={$ct:$(".content"),col:[{key:"uid",title:"用户ID",cls:"hidden_xs",sort:!0,filter:!0},{key:"nickname",title:"微信昵称",filter:!0,cls:"hidden_xs"},{key:"price",title:"提现金额",sort:!0,filter:!0},{key:"createdAt",title:"提现时间",sort:!0,filter:!0,cls:"hidden_xs"},{key:"alipay",title:"支付宝账号",filter:!0},{key:"alipay_name",title:"真实姓名",filter:!0},{key:"objectId",title:"操作",width:"60",render:function(t,e,n,i){t.append($('<button type="button" class="btn btn_info btn_query_detail" data-id="'+i.uid+'">查看</button>')),t.append($('<button type="button" class="btn btn_success btn_agree" data-id="'+e+'">同意</button>')),t.append($('<button type="button" class="btn btn_danger btn_disagree" data-id="'+e+'">拒绝</button>'))}}],url:"http://es2.laizhuan.com/back/finance/cashout_query"},n=new Table(e),i=!1,a=function(){var t,e=function(t,e){return""!==t?t+e.slice(0,1).toUpperCase()+e.slice(1):e},n=function(){var n=!1;return"number"==typeof window.screenX&&["webkit","moz","ms","o",""].forEach(function(i){0==n&&void 0!=document[e(i,"hidden")]&&(t=i,n=!0)}),n}(),i=function(){return n?document[e(t,"hidden")]:void 0},a=function(){return n?document[e(t,"visibilityState")]:void 0};return{isSupport:"undefined"!=typeof i(),hidden:i(),visibilityState:a(),visibilitychange:function(e,d){return d=!1,n&&"function"==typeof e?document.addEventListener(t+"visibilitychange",function(t){this.hidden=i(),this.visibilityState=a(),e.call(this,t)}.bind(this),d):void 0}}}();a.visibilitychange(function(){!a.hidden&&i&&(i=!1,n.data=null,n.render())});var d=new Mask({isShow:!1,$ct:$("body"),content:'<button class="btn btn_info_outline btn_pay_ok">支付完成</button>'});$("body").on("click",".btn_pay_ok",function(){d.hide(),n.data=null,n.render()}).on("click","table .btn_query_detail",function(){window.open("http://es2.laizhuan.com/back/page/user_detail/"+$(this).data("id"))}).on("click","table .btn_agree",function(){i=!0,a.isSupport||d.show(),window.open("http://app2.laizhuan.com/v1/duiba.php?pnowoid="+$(this).data("id"))}).on("click","table .btn_disagree",function(){t.initContent('<form class="disagree_form"><input type="hidden" name="objectId" value="'+$(this).data("id")+'"><div class="grid_nowrap"><div class="ct_4 field">原因</div><div class="ct_4-3"><textarea data-validate="require" name="errmsg"></textarea></div></div></form>'),t.show()})});