$(function(){var t,e=new Box({title:"拒绝提现",css:{width:"400px"},fnSure:function(e,n){var a=$(".disagree_form");if(!base.formValidate(a))return!1;var d={objectId:$('[name="objectId"]',a).val(),errmsg:$('[name="errmsg"]').val()};$.ajax({url:"http://es2.laizhuan.com/back/finance/cashout_disagree",type:"POST",dataType:"json",data:d}).done(function(e){1==e.status?(t.operTip(e&&e.msg||"操作成功！",{theme:"success",css:{"white-space":"nowrap",dir:"left"}}),i.data=null,i.render()):t.operTip(e&&e.msg||"操作失败！",{theme:"danger",css:{"white-space":"nowrap",dir:"left"}})}).fail(function(e){t.operTip("操作失败！",{theme:"danger",css:{"white-space":"nowrap",dir:"left"}})})},fnCancel:function(t){}}),n={$ct:$(".content"),col:[{key:"uid",title:"用户ID",cls:"hidden_xs",sort:!0,filter:!0},{key:"nickname",title:"微信昵称",filter:!0,cls:"hidden_xs"},{key:"price",title:"提现金额",sort:!0,filter:!0},{key:"createdAt",title:"提现时间",sort:!0,filter:!0,cls:"hidden_xs"},{key:"alipay",title:"支付宝账号",filter:!0},{key:"alipay_name",title:"真实姓名",filter:!0},{key:"objectId",title:"操作",width:"60",render:function(t,e,n,i){t.append($('<button type="button" class="btn btn_info btn_query_detail" data-id="'+i.uid+'">查看</button>')),t.append($('<button type="button" class="btn btn_success btn_agree" data-id="'+e+'">同意</button>')),t.append($('<button type="button" class="btn btn_danger btn_disagree" data-id="'+e+'">拒绝</button>'))}}],url:"http://es2.laizhuan.com/back/finance/cashout_query"},i=new Table(n),a=!1,d=function(){var t,e=function(t,e){return""!==t?t+e.slice(0,1).toUpperCase()+e.slice(1):e},n=function(){var n=!1;return"number"==typeof window.screenX&&["webkit","moz","ms","o",""].forEach(function(i){0==n&&void 0!=document[e(i,"hidden")]&&(t=i,n=!0)}),n}(),i=function(){return n?document[e(t,"hidden")]:void 0},a=function(){return n?document[e(t,"visibilityState")]:void 0};return{isSupport:"undefined"!=typeof i(),hidden:i(),visibilityState:a(),visibilitychange:function(e,d){return d=!1,n&&"function"==typeof e?document.addEventListener(t+"visibilitychange",function(t){this.hidden=i(),this.visibilityState=a(),e.call(this,t)}.bind(this),d):void 0}}}();d.visibilitychange(function(){!d.hidden&&a&&(a=!1,i.data=null,i.render())});var o=new Mask({isShow:!1,$ct:$("body"),content:'<button class="btn btn_info_outline btn_pay_ok">支付完成</button>'});$("body").on("click",".btn_pay_ok",function(){o.hide(),i.data=null,i.render()}).on("click","table .btn_query_detail",function(){window.open("http://es2.laizhuan.com/back/page/user_detail/"+$(this).data("id"))}).on("click","table .btn_agree",function(){a=!0,d.isSupport||o.show(),window.open("http://app2.laizhuan.com/v1/duiba.php?pnowoid="+$(this).data("id"))}).on("click","table .btn_disagree",function(){t=$(this).parent(),e.initContent('<form class="disagree_form"><input type="hidden" name="objectId" value="'+$(this).data("id")+'"><div class="grid_nowrap"><div class="ct_4 field">原因</div><div class="ct_4-3"><textarea data-validate="require" name="errmsg"></textarea></div></div></form>'),e.show()})});